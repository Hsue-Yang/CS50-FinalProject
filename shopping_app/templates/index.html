{% extends 'layout.html' %} {% load static %} {% block title %}比價神器 -
找到最優惠的價格{% endblock %} {% block content %}
<link rel="stylesheet" href="{% static 'css/style.css' %}" />
<section class="hero-banner">
  <div class="container">
    <h1 class="display-4 fw-bold mb-4">
      <i class="fas fa-chart-line me-3"></i>比價神器
    </h1>
    <p class="lead mb-5">智能比價，讓您輕鬆找到最優惠的價格</p>

    <!-- 精選商品展示 -->
    {% if featured_products %}
    <div class="row g-4 mb-5">
      <div class="col-12">
        <h3 class="mb-4"><i class="fas fa-star me-2"></i>精選商品</h3>
      </div>
      {% for product in featured_products %}
      <div class="col-lg-3 col-md-6">
        <div class="product-card h-100">
          {% if product.discount_percentage > 0 %}
          <div class="discount-badge">-{{ product.discount_percentage }}%</div>
          {% endif %}
          <img
            src="{{ product.image_url }}"
            alt="{{ product.name }}"
            class="product-image"
          />
          <div class="card-body p-3">
            <h6 class="card-title text-truncate">{{ product.name }}</h6>
            <div class="d-flex justify-content-between align-items-center">
              <div class="price-tag">NT$ {{ product.price }}</div>
              <small class="text-muted">{{ product.website.name }}</small>
            </div>
            {% if product.rating %}
            <div class="rating-stars mt-2">
              {% for i in "12345" %} {% if forloop.counter <= product.rating %}
              <i class="fas fa-star"></i>
              {% else %}
              <i class="far fa-star"></i>
              {% endif %} {% endfor %}
              <small class="text-muted ms-1"
                >({{ product.reviews_count }})</small
              >
            </div>
            {% endif %}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    {% endif %}
  </div>
</section>

<!-- 網站選擇器 -->
<div class="container">
  <div class="website-selector">
    <h3 class="text-center mb-4">
      <i class="fas fa-cogs me-2"></i>選擇比價網站
    </h3>
    <form id="add-store-form">
      <input
        type="text"
        id="store-input"
        placeholder="Enter store name (e.g. Amazon)"
        autocomplete="off"
      />
      <button type="submit">Add</button>
    </form>
    <div id="selected-stores" class="store-badges">
      <!-- 已選商城橫幅動態顯示 -->
      {% for store in selected_stores %}
      <span class="store-badge">{{ store }}</span>
      {% endfor %}
    </div>

    <form id="websiteForm">
      <div class="row">
        {% for website in websites %}
        <div class="col-lg-3 col-md-6 mb-3">
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              value="{{ website.id }}"
              id="website{{ website.id }}"
              name="websites"
              checked
            />
            <label class="form-check-label" for="website{{ website.id }}">
              <strong>{{ website.name }}</strong>
            </label>
          </div>
        </div>
        {% endfor %}
      </div>

      <!-- 已選擇的網站顯示 -->
      <div class="mt-4">
        <h5>目前選擇的網站：</h5>
        <div id="selectedWebsites" class="mt-2">
          {% for website in websites %}
          <span class="website-chip" data-website-id="{{ website.id }}">
            {{ website.name }}
          </span>
          {% endfor %}
        </div>
      </div>
    </form>
  </div>
</div>

<script src="{% static 'js/index.js' %}"></script>
{% endblock %}
